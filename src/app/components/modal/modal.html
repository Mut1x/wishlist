@if (isOpen) {
<div class="modal-backdrop" (click)="handleBackdropClick($event)">
  <div class="modal-content">
    <div class="modal-header">
      <h2>{{ editingWish ? 'Edit Wish' : 'Add New Wish' }}</h2>
      <button class="close-button" (click)="handleCancel()">&times;</button>
    </div>
    
    <div class="modal-body">
      <form #form="ngForm" class="wish-form">
        <div class="form-group">
          <label for="wishName">Wish Name *</label>
          <input 
            type="text" 
            id="wishName"
            placeholder="Enter wish name" 
            name="wishName" 
            [(ngModel)]="wishName" 
            class="form-input"
            required
          />
        </div>

        <div class="form-group">
          <label for="wishDescription">Description</label>
          <input 
            type="text" 
            id="wishDescription"
            placeholder="Enter description" 
            name="wishDescription" 
            [(ngModel)]="wishDescription" 
            class="form-input"
          />
        </div>

        <div class="form-group">
          <label for="wishPrice">Price</label>
          <div class="price-currency-group">
            <input 
              type="text" 
              id="wishPrice"
              placeholder="0.00" 
              name="wishPrice" 
              [(ngModel)]="wishPrice" 
              class="form-input price-input"
            />
            <select 
              name="wishCurrency" 
              [(ngModel)]="wishCurrency" 
              class="form-input currency-select"
            >
              @for (currency of currencies; track currency) {
                <option [value]="currency">{{ currency }}</option>
              }
            </select>
          </div>
        </div>

        <div class="form-group">
          <label for="wishLink">Link *</label>
          <input 
            type="url" 
            id="wishLink"
            placeholder="https://example.com" 
            name="wishLink" 
            [(ngModel)]="wishLink" 
            class="form-input"
            required
          />
        </div>

        @if (wishError) {
          <div class="error-message">
            Please fill in all required fields and ensure the link starts with https://
          </div>
        }
      </form>
    </div>

    <div class="modal-footer">
      <button class="btn btn-secondary" (click)="handleCancel()">Cancel</button>
      <button class="btn btn-primary" (click)="handleSave()">
        {{ editingWish ? 'Update' : 'Add' }} Wish
      </button>
    </div>
  </div>
</div>
}
